import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{d as s}from"./app.04784437.js";const a={},p=s(`<h1 id="\u5D4C\u5957\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5D4C\u5957\u67E5\u8BE2" aria-hidden="true">#</a> \u5D4C\u5957\u67E5\u8BE2</h1><h2 id="withtempquery" tabindex="-1"><a class="header-anchor" href="#withtempquery" aria-hidden="true">#</a> WithTempQuery</h2><blockquote><p>\u7248\u672C\u8981\u6C42\uFF1Av3.2.666+</p></blockquote><p>\u573A\u666F1\uFF1A\u67E5\u8BE2\u5206\u7EC4\u7B2C\u4E00\u6761\u8BB0\u5F55</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>fsql<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Id <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">WithTempQuery</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> <span class="token keyword">new</span>
    <span class="token punctuation">{</span>
        item <span class="token operator">=</span> a<span class="token punctuation">,</span>
        rownum <span class="token operator">=</span> SqlExt<span class="token punctuation">.</span><span class="token function">RowNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Over</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PartitionBy</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Nickname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>rownum <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>\u63D0\u793A\uFF1A\u652F\u6301\u591A\u8868\u5D4C\u5957\u67E5\u8BE2\uFF0Cfsql.Select&lt;User1, UserGroup1&gt;()</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Nickname<span class="token punctuation">]</span><span class="token punctuation">,</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span> <span class="token keyword">partition</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Nickname<span class="token punctuation">]</span> <span class="token keyword">order</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>rownum<span class="token punctuation">]</span>
    <span class="token keyword">FROM</span> <span class="token punctuation">[</span>User1<span class="token punctuation">]</span> a
    <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">1000</span>
<span class="token punctuation">)</span> a
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token punctuation">[</span>rownum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u573A\u666F2\uFF1A\u5206\u7EC4\u67E5\u8BE2\u5D4C\u5957</p><p>\u5F85\u8865\u5145..</p><p>\u573A\u666F3\uFF1A\u5D4C\u5957\u67E5\u8BE2 + Join</p><p>\u5F85\u8865\u5145..</p><h2 id="tosql-withsql" tabindex="-1"><a class="header-anchor" href="#tosql-withsql" aria-hidden="true">#</a> ToSql + WithSql</h2><p>\u8FD9\u662F\u65E9\u671F\u63D0\u4F9B\u7684\u5D4C\u5957\u67E5\u8BE2\u65B9\u6CD5</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> sql <span class="token operator">=</span> fsql<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Id <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ToSql</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> <span class="token keyword">new</span>
    <span class="token punctuation">{</span>
        item <span class="token operator">=</span> a<span class="token punctuation">,</span>
        rownum <span class="token operator">=</span> SqlExt<span class="token punctuation">.</span><span class="token function">RowNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Over</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PartitionBy</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Nickname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> FieldAliasOptions<span class="token punctuation">.</span>AsProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>

fsql<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">WithSql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;a.rownum = 1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Nickname<span class="token punctuation">]</span> 
<span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Nickname<span class="token punctuation">]</span><span class="token punctuation">,</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span> <span class="token keyword">partition</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Nickname<span class="token punctuation">]</span> <span class="token keyword">order</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>rownum<span class="token punctuation">]</span>
    <span class="token keyword">FROM</span> <span class="token punctuation">[</span>User1<span class="token punctuation">]</span> a
    <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">1000</span>
<span class="token punctuation">)</span> a
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>rownum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,15);function t(o,e){return p}var l=n(a,[["render",t],["__file","withtempquery.html.vue"]]);export{l as default};
