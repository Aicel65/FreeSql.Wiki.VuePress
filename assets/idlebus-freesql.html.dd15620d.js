import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,c as l,a as n,b as e,F as c,d as o,e as s,o as r}from"./app.7ef0d95e.js";const u={},i=o(`<h1 id="\u591A\u4E2A-ifreesql\u5B9E\u4F8B-\u5982\u4F55\u6CE8\u5165\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u591A\u4E2A-ifreesql\u5B9E\u4F8B-\u5982\u4F55\u6CE8\u5165\u4F7F\u7528" aria-hidden="true">#</a> \u591A\u4E2A IFreeSql\u5B9E\u4F8B\uFF0C\u5982\u4F55\u6CE8\u5165\u4F7F\u7528</h1><p>\u591A\u5E93\u5207\u6362\uFF0C\u52A8\u6001\u5207\u5E93\uFF0C\u52A8\u6001\u6CE8\u518C\u6570\u636E\u5E93</p><h2 id="\u4E00\u3001\u5B9A\u4E49\u591A\u4E2A-ifreesql" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u5B9A\u4E49\u591A\u4E2A-ifreesql" aria-hidden="true">#</a> \u4E00\u3001\u5B9A\u4E49\u591A\u4E2A IFreeSql</h2><p>\u8BE5\u65B9\u6CD5\u9002\u7528\u4E8E\u56FA\u5B9A\u6570\u636E\u5E93\uFF0C\u56FA\u5B9A\u914D\u7F6E\u9879</p><p>1\u3001\u5B9A\u4E49\u4E24\u4E2A\u6807\u8BC6\u7C7B\uFF1A</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">class</span> <span class="token class-name">MySqlFlag</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">SqlServerFlag</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2\u3001\u5728 Startup.cs \u4E2D\u5355\u4F8B\u6CE8\u5165</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> fsql1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FreeSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UseConnectionString</span><span class="token punctuation">(</span>DataType<span class="token punctuation">.</span>MySql<span class="token punctuation">,</span> <span class="token string">&quot;str1&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Build</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MySqlFlag<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> fsql2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FreeSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UseConnectionString</span><span class="token punctuation">(</span>DataType<span class="token punctuation">.</span>MySql<span class="token punctuation">,</span> <span class="token string">&quot;str1&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Build</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SqlServerFlag<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFreeSql<span class="token punctuation">&lt;</span>MySqlFlag<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fsql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFreeSql<span class="token punctuation">&lt;</span>SqlServerFlag<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fsql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>3\u3001\u5728 Controller \u4E2D\u4F7F\u7528</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;api/[controller]&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValuesController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ValuesController</span><span class="token punctuation">(</span><span class="token class-name">IFreeSql<span class="token punctuation">&lt;</span>MySqlFlag<span class="token punctuation">&gt;</span></span> mysql<span class="token punctuation">,</span> <span class="token class-name">IFreeSql<span class="token punctuation">&lt;</span>SqlServerFlag<span class="token punctuation">&gt;</span></span> sqlserver<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u4E8C\u3001\u4F7F\u7528-freesql-clound" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u4F7F\u7528-freesql-clound" aria-hidden="true">#</a> \u4E8C\u3001\u4F7F\u7528 FreeSql.Clound</h2><p>\u4E3A FreeSql \u63D0\u4F9B\u8DE8\u6570\u636E\u5E93\u8BBF\u95EE\uFF0C\u5206\u5E03\u5F0F\u4E8B\u52A1TCC\u3001SAGA\u89E3\u51B3\u65B9\u6848\uFF0C\u652F\u6301 .NET Core 2.1+, .NET Framework 4.0+.</p><p>\u5F00\u6E90\u5730\u5740\uFF1Ahttps://github.com/2881099/FreeSql.Cloud</p><blockquote><p>dotnet add package FreeSql.Cloud</p></blockquote><p>or</p><blockquote><p>Install-Package FreeSql.Cloud</p></blockquote><div class="language-c# ext-c# line-numbers-mode"><pre class="language-c#"><code>public enum DbEnum { db1, db2, db3 }

var fsql = new FreeSqlCloud&lt;DbEnum&gt;(&quot;myapp&quot;); //\u63D0\u793A\uFF1A\u6CDB\u578B\u53EF\u4EE5\u4F20\u5165 string
fsql.DistributeTrace = log =&gt; Console.WriteLine(log.Split(&#39;\\n&#39;)[0].Trim());

fsql.Register(DbEnum.db1, () =&gt; new FreeSqlBuilder()
    .UseConnectionString(DataType.Sqlite, @&quot;Data Source=db1.db&quot;)
    .Build());

fsql.Register(DbEnum.db2, () =&gt; new FreeSqlBuilder()
    .UseConnectionString(DataType.Sqlite, @&quot;Data Source=db2.db&quot;)
    .Build());

fsql.Register(DbEnum.db3, () =&gt; new FreeSqlBuilder()
    .UseConnectionString(DataType.Sqlite, @&quot;Data Source=db3.db&quot;)
    .Build());
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>FreeSqlCloud \u5FC5\u987B\u5B9A\u4E49\u6210\u5355\u4F8B\u6A21\u5F0F</p></blockquote><blockquote><p>new FreeSqlCloud&lt;DbEnum&gt;() \u591A\u8FDE\u63A5\u7BA1\u7406</p></blockquote><blockquote><p>new FreeSqlCloud&lt;DbEnum&gt;(&quot;myapp&quot;) \u5F00\u542F TCC/SAGA \u4E8B\u52A1\u751F\u6548</p></blockquote><p>FreeSqlCloud \u7684\u8BBF\u95EE\u65B9\u5F0F\u548C IFreeSql \u4E00\u6837\uFF1A</p><div class="language-c# ext-c# line-numbers-mode"><pre class="language-c#"><code>fsql.Select&lt;T&gt;();
fsql.Insert&lt;T&gt;();
fsql.Update&lt;T&gt;();
fsql.Delete&lt;T&gt;();

//...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u5207\u6362\u6570\u636E\u5E93\uFF1A</p><div class="language-c# ext-c# line-numbers-mode"><pre class="language-c#"><code>fsql.Change(DbEnum.db3).Select&lt;T&gt;();
//\u4EE5\u540E\u6240\u6709 fsql.Select/Insert/Update/Delete \u64CD\u4F5C\u662F db3
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h2>`,25),b={href:"https://github.com/luoyunchong/SampleApp/blob/master/SampleApi/Controllers/HomeController.cs",target:"_blank",rel:"noopener noreferrer"},d=s("SampleApp/HomeController.cs at master \xB7 luoyunchong/SampleApp (github.com)"),k={href:"https://github.com/luoyunchong/SampleApp/blob/master/SampleCore/MultiFreeSql.cs",target:"_blank",rel:"noopener noreferrer"},m=s("SampleApp/MultiFreeSql.cs at master \xB7 luoyunchong/SampleApp (github.com)"),g={href:"https://github.com/dotnetcore/FreeSql/issues/44",target:"_blank",rel:"noopener noreferrer"},q=s("\u591A\u4E2A IFreeSql \u5B9E\u4F8B\uFF0C\u5982\u4F55\u6CE8\u5165\u4F7F\u7528\uFF1F \xB7 Issue #44 \xB7 dotnetcore/FreeSql (github.com)"),S=n("blockquote",null,[n("p",null,[s("\u4E0E\u6B64\u6587\u7AE0\u6709\u70B9\u533A\u522B\uFF0C\u589E\u52A0\u4E86\u4E00\u4E9B\u914D\u7F6E\u9879\u548C\u9759\u6001\u65B9\u6CD5\u7684\u7406\u89E3\uFF0C\u628A"),n("code",null,"Change"),s(" \u4E0B\u653E\u5230"),n("code",null,"MultiFreeSqlExtensions"),s("\u6269\u5C55\u4E2D\uFF0C\u4ECE\u800C\u4FDD\u6301\u7B80\u5355\uFF0C\u9759\u6001\u65B9\u6CD5\u548CDI\u4FDD\u6301\u4E00\u81F4\u7684\u5199\u6CD5")])],-1);function h(f,v){const a=p("ExternalLinkIcon");return r(),l(c,null,[i,n("p",null,[n("a",b,[d,e(a)])]),n("p",null,[n("a",k,[m,e(a)])]),n("p",null,[n("a",g,[q,e(a)])]),S],64)}var _=t(u,[["render",h],["__file","idlebus-freesql.html.vue"]]);export{_ as default};
